{% extends 'generatorApp/index.html' %}
{% load static %}

{% block head %}
    <link rel="stylesheet" href="{% static 'generatorApp/schedules.css' %}">
    <title>schedules</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style>
        .main{
            margin-left: 40%;
            margin-top: 15%;
        }
    </style>
{% endblock %}

{% block content %}
<div class="main">
    <form method="POST">
        {% csrf_token %}
        <div>Create new schedule</div>

        {{ form }}

        <input type="submit" value="Create">
    </form>

    <br>
    <br>

    <div>
        <h3>Sortuj po:</h3>
        <form method="GET" id="sortForm">
{#            action=""{% url 'generatorApp:schedules' username=user.username%}#}
            <select name="sort_by" id="sort_by">
                <option value="name">Name(A-Z)</option>
                <option value="created_date">Created date</option>
            </select>
{#            <input type="submit" value="Sort by">#}
        </form>
        <h3>List of your schedules</h3>
        <ol>
            {% if schedule_list %}
                {% for schedule in schedule_list %}
                    <li>
                        <a href="{% url 'generatorApp:schedules' username=user.username%}">{{ schedule.name }}, {{ schedule.created_date }}</a>
                        <ol>
                            {% for label in labels %}
                                <li><a href="{% url 'generatorApp:schedules' username=user.username%}">{{ label }}</a></li>
                            {% endfor %}
                        </ol>
                    </li>
                {% endfor %}
            {% else %}
                <p>It seems to you don't ave any schedules :<</p>
            {% endif %}
        </ol>
    </div>
</div>

<script>
    $(document).ready(()=>{
        $('#sort_by').change(()=>{
            $('#sortForm').submit();
        });
    });
</script>
{% endblock %}
